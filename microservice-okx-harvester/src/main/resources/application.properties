quarkus.kafka.devservices.enabled=false

%prod.quarkus.http.port=80

okx.websocket.enabled=true

# логирование
quarkus.log.level=INFO
quarkus.log.console.enable=true
# Текстовый формат
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] (%t) %X{requestId} %s%e%n

# --- HISTORY DEV ---
%dev.mp.messaging.outgoing.producer-1m-history.connector=smallrye-kafka
%dev.mp.messaging.outgoing.producer-1m-history.topic=dev-okx-candle-1m-history
%dev.mp.messaging.outgoing.producer-1m-history.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%dev.mp.messaging.outgoing.producer-1m-history.bootstrap.servers=localhost:19092

%dev.mp.messaging.outgoing.producer-1h-history.connector=smallrye-kafka
%dev.mp.messaging.outgoing.producer-1h-history.topic=dev-okx-candle-1h-history
%dev.mp.messaging.outgoing.producer-1h-history.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%dev.mp.messaging.outgoing.producer-1h-history.bootstrap.servers=localhost:19092

%dev.mp.messaging.outgoing.producer-4h-history.connector=smallrye-kafka
%dev.mp.messaging.outgoing.producer-4h-history.topic=dev-okx-candle-4h-history
%dev.mp.messaging.outgoing.producer-4h-history.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%dev.mp.messaging.outgoing.producer-4h-history.bootstrap.servers=localhost:19092

%dev.mp.messaging.outgoing.producer-1d-history.connector=smallrye-kafka
%dev.mp.messaging.outgoing.producer-1d-history.topic=dev-okx-candle-1d-history
%dev.mp.messaging.outgoing.producer-1d-history.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%dev.mp.messaging.outgoing.producer-1d-history.bootstrap.servers=localhost:19092


# --- HISTORY PROD ---
%prod.mp.messaging.outgoing.producer-1m-history.connector=smallrye-kafka
%prod.mp.messaging.outgoing.producer-1m-history.topic=prod-okx-candle-1m-history
%prod.mp.messaging.outgoing.producer-1m-history.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%prod.mp.messaging.outgoing.producer-1m-history.bootstrap.servers=redpanda:9092

%prod.mp.messaging.outgoing.producer-1h-history.connector=smallrye-kafka
%prod.mp.messaging.outgoing.producer-1h-history.topic=prod-okx-candle-1h-history
%prod.mp.messaging.outgoing.producer-1h-history.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%prod.mp.messaging.outgoing.producer-1h-history.bootstrap.servers=redpanda:9092

%prod.mp.messaging.outgoing.producer-4h-history.connector=smallrye-kafka
%prod.mp.messaging.outgoing.producer-4h-history.topic=prod-okx-candle-4h-history
%prod.mp.messaging.outgoing.producer-4h-history.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%prod.mp.messaging.outgoing.producer-4h-history.bootstrap.servers=redpanda:9092

%prod.mp.messaging.outgoing.producer-1d-history.connector=smallrye-kafka
%prod.mp.messaging.outgoing.producer-1d-history.topic=prod-okx-candle-1d-history
%prod.mp.messaging.outgoing.producer-1d-history.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%prod.mp.messaging.outgoing.producer-1d-history.bootstrap.servers=redpanda:9092

# --- Index candlesticks channel DEV---
%dev.mp.messaging.outgoing.producer-1m.connector=smallrye-kafka
%dev.mp.messaging.outgoing.producer-1m.topic=dev-okx-candle-1m
%dev.mp.messaging.outgoing.producer-1m.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%dev.mp.messaging.outgoing.producer-1m.bootstrap.servers=localhost:19092

%dev.mp.messaging.outgoing.producer-1h.connector=smallrye-kafka
%dev.mp.messaging.outgoing.producer-1h.topic=dev-okx-candle-1h
%dev.mp.messaging.outgoing.producer-1h.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%dev.mp.messaging.outgoing.producer-1h.bootstrap.servers=localhost:19092

%dev.mp.messaging.outgoing.producer-4h.connector=smallrye-kafka
%dev.mp.messaging.outgoing.producer-4h.topic=dev-okx-candle-4h
%dev.mp.messaging.outgoing.producer-4h.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%dev.mp.messaging.outgoing.producer-4h.bootstrap.servers=localhost:19092

%dev.mp.messaging.outgoing.producer-1d.connector=smallrye-kafka
%dev.mp.messaging.outgoing.producer-1d.topic=dev-okx-candle-1d
%dev.mp.messaging.outgoing.producer-1d.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%dev.mp.messaging.outgoing.producer-1d.bootstrap.servers=localhost:19092

# --- Index candlesticks channel PROD---
%prod.mp.messaging.outgoing.producer-1m.connector=smallrye-kafka
%prod.mp.messaging.outgoing.producer-1m.topic=prod-okx-candle-1m
%prod.mp.messaging.outgoing.producer-1m.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%prod.mp.messaging.outgoing.producer-1m.bootstrap.servers=redpanda:9092

%prod.mp.messaging.outgoing.producer-1h.connector=smallrye-kafka
%prod.mp.messaging.outgoing.producer-1h.topic=prod-okx-candle-1h
%prod.mp.messaging.outgoing.producer-1h.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%prod.mp.messaging.outgoing.producer-1h.bootstrap.servers=redpanda:9092

%prod.mp.messaging.outgoing.producer-4h.connector=smallrye-kafka
%prod.mp.messaging.outgoing.producer-4h.topic=prod-okx-candle-4h
%prod.mp.messaging.outgoing.producer-4h.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%prod.mp.messaging.outgoing.producer-4h.bootstrap.servers=redpanda:9092

%prod.mp.messaging.outgoing.producer-1d.connector=smallrye-kafka
%prod.mp.messaging.outgoing.producer-1d.topic=prod-okx-candle-1d
%prod.mp.messaging.outgoing.producer-1d.value.serializer=org.apache.kafka.common.serialization.StringSerializer
%prod.mp.messaging.outgoing.producer-1d.bootstrap.servers=redpanda:9092

# --- OKX REST HISTORY HARVESTER ---
# индексный инструмент
okx.history.enabled=true
okx.history.instId=BTC-USDT
okx.history.baseUrl=https://www.okx.com
# макс. кол-во свечей за запрос 100 макс
okx.history.limit=100
# откуда тянуть историю (2021-01-01 UTC), выстави под себя
okx.history.startEpochMs=1609459200000
# троттлинг между запросами
okx.history.requestPauseMs=500
# повторы при 429/сетевых ошибках
okx.history.maxRetries=5
# базовая задержка повтора
okx.history.retryBackoffMs=1000
# СКОЛЬКО страниц забрать (страница = limit записей)
okx.history.pages-limit=1
# Какие бары тянуть при старте (через запятую; допустимы 1m,1H,4H,1D)
okx.history.bars=1m,1H,4H,1D